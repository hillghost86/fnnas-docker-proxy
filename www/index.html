<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FN Docker Proxy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .fade-in {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- å¤´éƒ¨ -->
        <header class="text-center mb-12 fade-in">
            <h1 class="text-5xl font-bold text-gray-800 mb-4">ğŸ³ FN Docker Proxy</h1>
            <p class="text-xl text-gray-600">é€šè¿‡ Nginx åå‘ä»£ç†é£ç‰› NAS çš„ Docker Registryï¼Œå®ç°å±€åŸŸç½‘å†… Docker é•œåƒåŠ é€Ÿ</p>
        </header>

        <!-- åŠŸèƒ½ç‰¹æ€§ -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8 fade-in">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">âœ¨ åŠŸèƒ½ç‰¹æ€§</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="flex items-start">
                    <span class="text-2xl mr-3">ğŸ”</span>
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-1">è‡ªåŠ¨è®¤è¯</h3>
                        <p class="text-gray-600 text-sm">è‡ªåŠ¨æ·»åŠ è®¤è¯ headersï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="text-2xl mr-3">ğŸ”„</span>
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-1">è‡ªåŠ¨æ›´æ–°</h3>
                        <p class="text-gray-600 text-sm">å®šæ—¶è‡ªåŠ¨æ›´æ–°è®¤è¯ä¿¡æ¯ï¼Œä¿æŒæœåŠ¡ç¨³å®š</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="text-2xl mr-3">âš¡</span>
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-1">é•œåƒåŠ é€Ÿ</h3>
                        <p class="text-gray-600 text-sm">å±€åŸŸç½‘å†… Docker é•œåƒæ‹‰å–åŠ é€Ÿ</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="text-2xl mr-3">ğŸ›¡ï¸</span>
                    <div>
                        <h3 class="font-semibold text-gray-800 mb-1">å®‰å…¨å¯é </h3>
                        <p class="text-gray-600 text-sm">ä½¿ç”¨ Nginx åå‘ä»£ç†ï¼Œç¨³å®šå¯é </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- å¿«é€Ÿå¼€å§‹ -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8 fade-in">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
            <div class="space-y-6">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">1. å…‹éš†é¡¹ç›®</h3>
                    <div class="space-y-2">
                        <div class="bg-gray-100 rounded-lg p-4 relative group">
                            <code class="text-sm" id="clone-github">git clone https://github.com/hillghost86/fnnas-docker-proxy.git</code>
                            <button onclick="copyToClipboard('clone-github')" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs" title="å¤åˆ¶">
                                ğŸ“‹ å¤åˆ¶
                            </button>
                        </div>
                        <div class="bg-gray-100 rounded-lg p-4 relative group">
                            <code class="text-sm" id="clone-gitee">git clone https://gitee.com/hillghost86/fnnas-docker-proxy.git</code>
                            <button onclick="copyToClipboard('clone-gitee')" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs" title="å¤åˆ¶">
                                ğŸ“‹ å¤åˆ¶
                            </button>
                        </div>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">2. è®¾ç½®æ–‡ä»¶æƒé™ï¼ˆå¿…é¡»æ­¥éª¤ï¼‰</h3>
                    <p class="text-gray-600 text-sm mb-2">é¦–æ¬¡å¯åŠ¨å‰å¿…é¡»è®¾ç½® <code class="bg-gray-200 px-1 rounded">www</code> ç›®å½•æƒé™ï¼Œé¿å… 403 é”™è¯¯ï¼š</p>
                    <div class="bg-gray-100 rounded-lg p-4 relative group">
                        <code class="text-sm" id="chmod-cmd">chmod 755 www/<br>chmod 644 www/index.html</code>
                        <button onclick="copyToClipboard('chmod-cmd')" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs" title="å¤åˆ¶">
                            ğŸ“‹ å¤åˆ¶
                        </button>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">3. å¯åŠ¨æœåŠ¡</h3>
                    <div class="bg-gray-100 rounded-lg p-4 relative group">
                        <code class="text-sm" id="start-cmd">docker compose up -d</code>
                        <button onclick="copyToClipboard('start-cmd')" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs" title="å¤åˆ¶">
                            ğŸ“‹ å¤åˆ¶
                        </button>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">4. é…ç½® Docker å®¢æˆ·ç«¯</h3>
                    <p class="text-gray-600 text-sm mb-2">ç¼–è¾‘ Docker é…ç½®æ–‡ä»¶ï¼ˆæ ¹æ®ç³»ç»Ÿä¸åŒï¼Œè·¯å¾„å¯èƒ½ä¸åŒï¼‰ï¼š</p>
                    <div class="bg-gray-100 rounded-lg p-4 mb-2">
                        <code class="text-sm"># Linux: /etc/docker/daemon.json<br># macOS/Windows: Docker Desktop -> Settings -> Docker Engine</code>
                    </div>
                    <p class="text-gray-600 text-sm mb-2">æ·»åŠ ä»¥ä¸‹é…ç½®ï¼ˆå°† <code class="bg-gray-200 px-1 rounded">192.168.1.100</code> æ›¿æ¢ä¸ºä½ çš„é£ç‰› IP åœ°å€ï¼‰ï¼š</p>
                    <div class="bg-gray-100 rounded-lg p-4 relative group">
                        <pre class="text-sm overflow-x-auto"><code id="docker-config">{
  "registry-mirrors": [
    "http://192.168.1.100:15000"
  ],
  "insecure-registries": [
    "192.168.1.100:15000"
  ]
}</code></pre>
                        <button onclick="copyToClipboard('docker-config')" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs" title="å¤åˆ¶">
                            ğŸ“‹ å¤åˆ¶
                        </button>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">5. é‡å¯ Docker æœåŠ¡</h3>
                    <div class="bg-gray-100 rounded-lg p-4 relative group">
                        <code class="text-sm" id="restart-cmd"># Linux<br>sudo systemctl restart docker<br><br># macOS/Windows: åœ¨ Docker Desktop ä¸­é‡å¯æœåŠ¡</code>
                        <button onclick="copyToClipboard('restart-cmd')" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs" title="å¤åˆ¶">
                            ğŸ“‹ å¤åˆ¶
                        </button>
                    </div>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">6. æµ‹è¯•</h3>
                    <div class="bg-gray-100 rounded-lg p-4 relative group">
                        <code class="text-sm" id="test-cmd">docker pull alpine:latest</code>
                        <button onclick="copyToClipboard('test-cmd')" class="absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-xs" title="å¤åˆ¶">
                            ğŸ“‹ å¤åˆ¶
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- å·¥ä½œåŸç† -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8 fade-in">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">ğŸ”§ å·¥ä½œåŸç†</h2>
            <div class="space-y-4">
                <div class="flex items-start">
                    <span class="text-xl font-bold text-blue-600 mr-3">1</span>
                    <div>
                        <p class="text-gray-700">Docker å®¢æˆ·ç«¯è¯·æ±‚ <code class="bg-gray-100 px-2 py-1 rounded text-sm">http://ä½ çš„IP:15000/v2/...</code></p>
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="text-xl font-bold text-blue-600 mr-3">2</span>
                    <div>
                        <p class="text-gray-700">Nginx ä»£ç†åˆ° <code class="bg-gray-100 px-2 py-1 rounded text-sm">https://docker.fnnas.com</code>ï¼Œè‡ªåŠ¨æ·»åŠ è®¤è¯ headers</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="text-xl font-bold text-blue-600 mr-3">3</span>
                    <div>
                        <p class="text-gray-700">è¿”å›çš„ <code class="bg-gray-100 px-2 py-1 rounded text-sm">WWW-Authenticate</code> header è¢«é‡å†™ä¸ºä»£ç†åœ°å€</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="text-xl font-bold text-blue-600 mr-3">4</span>
                    <div>
                        <p class="text-gray-700">Docker ä½¿ç”¨é‡å†™åçš„åœ°å€è·å– tokenï¼Œç»§ç»­é€šè¿‡ä»£ç†å®Œæˆé•œåƒæ‹‰å–</p>
                    </div>
                </div>
                <div class="flex items-start">
                    <span class="text-xl font-bold text-blue-600 mr-3">5</span>
                    <div>
                        <p class="text-gray-700">å®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ£€æµ‹è®¤è¯ä¿¡æ¯å˜åŒ–ï¼Œæ›´æ–°é…ç½®å¹¶é‡æ–°åŠ è½½ Nginx</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- é…ç½®è¯´æ˜ -->
        <section class="bg-white rounded-lg shadow-md p-8 mb-8 fade-in">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">âš™ï¸ é…ç½®è¯´æ˜</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">è‡ªåŠ¨æ›´æ–°ï¼ˆæ¨èï¼‰</h3>
                    <p class="text-gray-600 text-sm mb-2">é¡¹ç›®é»˜è®¤å¯ç”¨è‡ªåŠ¨æ›´æ–°ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä»é£ç‰› NAS çš„é…ç½®æ–‡ä»¶ä¸­è·å–è®¤è¯ä¿¡æ¯ã€‚</p>
                    <p class="text-gray-600 text-sm">é…ç½®æ–‡ä»¶è·¯å¾„ï¼š<code class="bg-gray-100 px-2 py-1 rounded text-sm">/root/.docker/config.json</code></p>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">æ›´æ–°é—´éš”</h3>
                    <p class="text-gray-600 text-sm">é»˜è®¤ 3600 ç§’ï¼ˆ1å°æ—¶ï¼‰ï¼Œå¯åœ¨ <code class="bg-gray-100 px-2 py-1 rounded text-sm">.env</code> æ–‡ä»¶ä¸­ä¿®æ”¹ <code class="bg-gray-100 px-2 py-1 rounded text-sm">UPDATE_INTERVAL</code></p>
                </div>
                <div>
                    <h3 class="font-semibold text-gray-800 mb-2">æ—¶åŒºè®¾ç½®</h3>
                    <p class="text-gray-600 text-sm">é»˜è®¤ä½¿ç”¨åŒ—äº¬æ—¶é—´ï¼ˆAsia/Shanghaiï¼ŒCSTï¼ŒUTC+8ï¼‰</p>
                </div>
            </div>
        </section>

        <!-- æ³¨æ„äº‹é¡¹ -->
        <section class="bg-yellow-50 border border-yellow-200 rounded-lg p-8 mb-8 fade-in">
            <h2 class="text-2xl font-semibold text-yellow-800 mb-6">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
            <ul class="space-y-3 text-yellow-700">
                <li class="flex items-start">
                    <span class="mr-2">â€¢</span>
                    <span>æœ¬é¡¹ç›®<strong>ä»…é™åœ¨é£ç‰› NAS ä¸Šä½¿ç”¨</strong>ï¼Œå› ä¸ºéœ€è¦ç›´æ¥æŒ‚è½½é£ç‰› NAS çš„é…ç½®æ–‡ä»¶</span>
                </li>
                <li class="flex items-start">
                    <span class="mr-2">â€¢</span>
                    <span>ç¡®ä¿å®¹å™¨å¯ä»¥è¯»å–æŒ‚è½½çš„é…ç½®æ–‡ä»¶ï¼ˆ<code class="bg-yellow-100 px-1 rounded">/root/.docker/config.json</code>ï¼‰</span>
                </li>
                <li class="flex items-start">
                    <span class="mr-2">â€¢</span>
                    <span>ä¸è¦è®¾ç½®å¤ªé¢‘ç¹çš„æ›´æ–°é—´éš”ï¼Œå»ºè®®è‡³å°‘ 10 åˆ†é’Ÿ</span>
                </li>
                <li class="flex items-start">
                    <span class="mr-2">â€¢</span>
                    <span>å¦‚æœé‡åˆ°æƒé™é—®é¢˜ï¼Œè¯·è¿è¡Œ <code class="bg-yellow-100 px-1 rounded">chmod 755 www/ && chmod 644 www/index.html</code></span>
                </li>
            </ul>
        </section>

        <!-- é“¾æ¥ -->
        <section class="bg-white rounded-lg shadow-md p-8 fade-in">
            <h2 class="text-2xl font-semibold text-gray-800 mb-6">ğŸ”— ç›¸å…³é“¾æ¥</h2>
            <div class="flex flex-wrap gap-4">
                <a href="https://github.com/hillghost86/fnnas-docker-proxy" target="_blank" class="px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 transition-colors">
                    ğŸ“¦ GitHub
                </a>
                <a href="https://gitee.com/hillghost86/fnnas-docker-proxy" target="_blank" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                    ğŸ“¦ Gitee
                </a>
            </div>
        </section>

        <!-- é¡µè„š -->
        <footer class="text-center mt-12 text-gray-500 text-sm fade-in">
            <p>FN Docker Proxy | ä½¿ç”¨ Nginx åå‘ä»£ç†å®ç° Docker é•œåƒåŠ é€Ÿ</p>
        </footer>
    </div>

    <script>
        // å¤åˆ¶åˆ°å‰ªè´´æ¿åŠŸèƒ½
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            let text = '';
            
            // å¦‚æœæ˜¯ <code> æ ‡ç­¾ï¼Œè·å–æ–‡æœ¬å†…å®¹
            if (element.tagName === 'CODE') {
                text = element.textContent || element.innerText;
            } else if (element.tagName === 'PRE') {
                text = element.textContent || element.innerText;
            } else {
                text = element.textContent || element.innerText;
            }
            
            // å¤„ç†å¤šè¡Œæ–‡æœ¬ï¼ˆç§»é™¤ <br> æ ‡ç­¾ï¼Œä¿ç•™æ¢è¡Œï¼‰
            text = text.replace(/<br\s*\/?>/gi, '\n').trim();
            
            // ä½¿ç”¨ Clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    showCopySuccess(elementId);
                }).catch(err => {
                    console.error('å¤åˆ¶å¤±è´¥:', err);
                    fallbackCopyTextToClipboard(text, elementId);
                });
            } else {
                // é™çº§æ–¹æ¡ˆ
                fallbackCopyTextToClipboard(text, elementId);
            }
        }
        
        // é™çº§å¤åˆ¶æ–¹æ¡ˆ
        function fallbackCopyTextToClipboard(text, elementId) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess(elementId);
                } else {
                    alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶');
                }
            } catch (err) {
                console.error('å¤åˆ¶å¤±è´¥:', err);
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨é€‰æ‹©æ–‡æœ¬å¤åˆ¶');
            }
            
            document.body.removeChild(textArea);
        }
        
        // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
        function showCopySuccess(elementId) {
            const button = document.querySelector(`[onclick="copyToClipboard('${elementId}')"]`);
            if (button) {
                const originalText = button.textContent;
                button.textContent = 'âœ“ å·²å¤åˆ¶';
                button.classList.add('bg-green-200', 'hover:bg-green-300');
                button.classList.remove('bg-gray-200', 'hover:bg-gray-300');
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.classList.remove('bg-green-200', 'hover:bg-green-300');
                    button.classList.add('bg-gray-200', 'hover:bg-gray-300');
                }, 2000);
            }
        }
    </script>
</body>
</html>
